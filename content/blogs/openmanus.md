---
title: "OpenManusæŠ€æœ¯æµ…æ"
date: 3,24,2025
 
---
 æœ€è¿‘åœ¨å‚åŠ OpenManusçš„é»‘å®¢æ¾ï¼Œå°±æ¥ç ”ç©¶ä¸€ä¸‹å®ƒçš„æºç ã€‚ç›®å‰è¿˜å¤„äºDemoé˜¶æ®µï¼Œä»£ç é‡ä¸å¤šï¼Œä¼˜åŒ–ç©ºé—´å¾ˆå¤§ã€‚éå¸¸é€‚åˆåˆšå…¥é—¨æƒ³è¦ç ”ç©¶æ™ºèƒ½ä½“å¼€å‘çš„æ–°æ‰‹

> æœ¬æ–‡åªè®°å½•å½“å‰ä¸ªäººè°ƒè¯•å’Œé˜…è¯»OpenManusä»£ç çš„ç†è§£ï¼Œå¯èƒ½ä¼šå‡ºç°çº°æ¼æˆ–ç†è§£é”™è¯¯ï¼ï¼  
### æ•´ä½“æ¶æ„

æ ¸å¿ƒç›®å½•ï¼ŒåŠŸèƒ½å·²ç»å¾ˆæ¸…æ™°äº†ã€‚ 
![[Pasted image 20250329204030.png]]


ç›®å‰åº”è¯¥æ˜¯åªç”¨äº†ä¸‹å›¾å‡ ä¸ªAgentï¼Œå…¶ä»–çš„å¦‚SWE Agentè²Œä¼¼è¿˜æ²¡æœ‰ç”¨ä¸Šã€‚å›´ç»•ç€ Manus Agentåšäº†ä»»åŠ¡çš„æ‹†åˆ†å’Œç¼–æ’ã€‚  ç»§æ‰¿å›¾å¦‚ä¸‹ï¼š 

![[openmanus art.png]]

åœ¨è§£é‡Šå‡ ä¸ªAgentä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ç¯‡å…³é”®2022å¹´å‘å¸ƒçš„è®ºæ–‡ï¼š **ReActï¼šSynergizing Reasoing and Actiong In Language Models åœ¨å¤§è¯­è¨€æ¨¡å‹ä¸­ååŒæ¨ç†å’Œè¡ŒåŠ¨ã€‚** å…¶ä¸­æå‡ºäº†ä¸€ç§å¼•å¯¼LLMså®Œæˆä»»åŠ¡çš„æ–°æ€è·¯ã€‚  

ReActæ ¸å¿ƒæ€æƒ³æ˜¯è¦æ±‚å¤§æ¨¡å‹ä¸æ–­é‡å¤åœ°å»æ¨ç†ã€è¡ŒåŠ¨ã€è§‚å¯Ÿ ï¼Œæ¥å®Œæˆå¤šæ­¥å¤æ‚çš„ä»»åŠ¡ã€‚è¿™ç§æ–¹å¼æ¯”èµ·å•çº¯çš„æ¨ç†æˆ–è¡ŒåŠ¨èƒ½å¤Ÿæ›´å¥½åœ°æå‡æ¨¡å‹çš„è¡¨ç°ã€‚

 æˆ‘ä»¬ç”¨è®ºæ–‡ä¸­çš„ä¸€ä¸ªç¤ºä¾‹æ¥ç†è§£è¿™ä¸ªèŒƒå¼ï¼Œ åˆ†åˆ«ç”¨4ç§æç¤ºæ–¹æ³•æ¥è®©å¤§æ¨¡å‹è§£å†³ä¸€ä¸ªé—®é¢˜ï¼š  å¯»æ‰¾é¥æ§å™¨ä¹‹å¤–æ§åˆ¶è‹¹æœTVçš„å·¥å…·ã€‚
 
(a) æ ‡å‡†ï¼Œ(b) æ€è€ƒé“¾ï¼ˆCoTï¼Œä»…æ¨ç†ï¼‰ï¼Œ(c) ä»…è¡ŒåŠ¨ï¼Œå’Œ(d)  ReActï¼ˆæ¨ç†+è¡ŒåŠ¨ï¼‰

 ![[Pasted image ReAct.png]]

å¯ä»¥çœ‹åˆ°åªæœ‰ReActå›ç­”æ­£ç¡®ï¼ŒLLMåœ¨æ¯æ¬¡è¡ŒåŠ¨åï¼Œè¿˜ä¼šè§‚å¯Ÿè¡ŒåŠ¨çš„ç»“æœå¹¶æ¨ç†ä¸‹ä¸€æ­¥çš„è¡ŒåŠ¨ã€‚


OpenManusæ­£æ˜¯åŸºäºReActçš„ç®—æ³•æ„å»ºçš„ã€‚ 
- Baseï¼šåˆå§‹åŒ–Agentï¼ŒåŒ…æ‹¬å†…å­˜ç®¡ç†ã€AgentçŠ¶æ€ç®¡ç†ã€æ¨¡å‹é…ç½®ã€å¹¶å®šä¹‰äº†ä¸€ä¸ªåŸºç¡€çš„æ¡†æ¶ç»™å­ç±»ç»§æ‰¿ã€‚
- ReActï¼šå¯¹**ReAct**çš„æ ¸å¿ƒå®ç°ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼šthink()ï¼Œact()ï¼Œ step() 
- ToolCallï¼šè°ƒç”¨å·¥å…·çš„Agentï¼Œ ä¹Ÿå®ç°äº†think()å’Œact(), æ–¹æ³•ï¼Œæ˜¯ç›®å‰OpenManusé»˜è®¤æ¨¡å¼ä¸‹ï¼Œèƒ½å¤Ÿè°ƒç”¨å·¥å…·è¡ŒåŠ¨çš„Agentã€‚
- Browserï¼šä¸“é—¨å’Œæµè§ˆå™¨äº¤äº’çš„Agent
- Manusï¼šæ¯”è¾ƒç®€å•ï¼Œåªå®ç°äº†think() æ–¹æ³•ã€‚


### è¿è¡Œæµç¨‹

è·‘èµ·æ¥è°ƒè¯•å‡ æ¬¡å¯ä»¥çœ‹æ¸…æ¥šå‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹
![[Pasted image 20250329173749.png]]

1.  æ‰§è¡Œèµ·ç‚¹ base.run() æ§åˆ¶æ•´ä½“æµç¨‹
2. ReActå¾ªç¯ï¼ŒReAct.step()æ˜¯æ ¸å¿ƒçš„ReActç®—æ³•æ€è€ƒ-è¡ŒåŠ¨å¾ªç¯æ­¥éª¤
3. æ€è€ƒé“¾ï¼ˆThink Chainï¼‰ï¼šManus.think()ã€Browser.think()ã€ToolCall.think() è°ƒç”¨é“¾ï¼Œæ¯ä¸ªthinkæ–¹æ³•éƒ½è°ƒç”¨äº†çˆ¶æ–¹æ³•çš„thinkæ–¹æ³•ï¼Œæœ€åæ˜¯ToolCallè¿™ä¸ªAgentå’ŒLLMäº¤äº’ã€‚
4. åœ¨ToolCallä¸­ï¼Œè´Ÿè´£æ•´åˆä¸Šä¸‹æ–‡å’ŒPromptï¼Œè°ƒç”¨LLMï¼Œè§£æLLMè¿”å›çš„ä¿¡æ¯ï¼Œ å¦‚æœæœ‰å·¥å…·è°ƒç”¨ï¼ˆToolCallï¼‰ï¼Œåˆ™ç»„è£…å‚æ•°è°ƒç”¨å¯¹åº”çš„å·¥å…· ï¼ŒæŠŠå·¥å…·è°ƒç”¨è¿”å›çš„ä¿¡æ¯ä¼ é€’LLM ä½œä¸ºObservation


### è¸©å‘ç»éªŒ

### Qwen/ToolCallå‚æ•°æ ¼å¼ä¸æ˜¯JSON 

ç”¨ç¡…åŸºæµåŠ¨çš„Qwen/QwQ-32Bè·‘Caseæ—¶ï¼Œç»å¸¸é‡åˆ°æ‰§è¡ŒToolçš„æ—¶å€™æŠ¥é”™ï¼š
``` python
tool_context=None llm=<app.llm.LLM object at 0x0000017E331416A0> argument after ** must be a mapping, not str
```
åŸå› å°±æ˜¯è¿™ä¸ªæ¨¡å‹è¿”å›æ¥çš„toolcallçš„å‚æ•°ï¼Œä¸æ˜¯jsonæ ¼å¼çš„ã€‚ è°ƒè¯•åˆ†æç¡®å®ç»å¸¸è¿”å›äº†å­—ç¬¦ä¸²è€Œä¸æ˜¯JSONæ ¼å¼

![[Pasted image 20250330200230.png]]

ä¿®å¤ï¼šå®é™…ä¸Šæ¨¡å‹è¿”å›çš„JSONå¤šäº†ä¸€å±‚""æ‰€ä»¥å˜æˆå­—ç¬¦ä¸²äº†ï¼Œä»å¯ç”¨æ€§çš„è§’åº¦æ¥è¯´ä¿®å¤ä¹Ÿå¾ˆç®€å•ï¼Œå¤šåŠ ä¸€æ¬¡loadså°±èƒ½å¤Ÿæé«˜ä½¿ç”¨ä¸Šçš„å‡†ç¡®åº¦ ã€‚ 

åœ¨toolcall.py#execute_tool æ–¹æ³•ä¸­æ·»åŠ argsä¸ºjsonçš„æ ¡éªŒï¼Œå¦‚æœä¸æ˜¯JSONï¼Œå†å°è¯•json.loads()
``` python 
try:  
    # Parse arguments  
    args = json.loads(command.function.arguments or "{}")  
    logger.info(f"Checkin args is JSON: type={type(args)} , args={args}")  
  
    # Execute the tool  
    logger.info(f"ğŸ”§ Activating tool: '{name}'...")  
  
    if not type(args)==dict :  
        try :  
            args = json.loads(args)  
        except Exception as e:  
            result = "Error: invalid tool arguments!! suppose to be JSONObject but found str,please"  
  
    result = await self.available_tools.execute(name=name, tool_input=args)
```



### OpenManusä¸ç»“æŸä»»åŠ¡

ä¸è®¡å¼‚å¸¸ï¼Œopenmanuså¯èƒ½ä¼šæœ‰ä¸¤ç§æƒ…å†µç»“æŸï¼š
- è§„åˆ’åˆ°æœ€å¤§æ­¥æ•°äº†ï¼ˆé»˜è®¤æœ€å¤§20æ­¥ï¼‰
- æ™ºèƒ½ä½“åˆ¤æ–­ä»»åŠ¡å®Œæˆï¼Œè‡ªå·±å†³å®šè°ƒç”¨terminateç»“æŸã€‚

ä½†æ˜¯ä½ ä¼šå‘ç°OpenManusç»å¸¸æŠŠç»“æœå·²ç»è¾“å‡ºå‡ºæ¥äº†ï¼Œä¹Ÿä¸è°ƒç”¨å·¥å…·ï¼Œ è¿˜æ˜¯ä¸æ–­è¿›è¡Œä¸‹ä¸€æ­¥ã€‚å®é™…ä¸Šæ˜¯OpenManusè®¤ä¸ºç»“æœå·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯æç¤ºè¯å’Œå·¥å…·ä¸Šæ²¡æœ‰å¾ˆå¥½åœ°å¼•å¯¼æ¨¡å‹è‡ªä¸»ç»ˆæ­¢ã€‚ 


ä¼˜åŒ–æ–¹å‘ä¹‹ä¸€æ˜¯æç¤ºè¯å¢å¼ºï¼Œæ¯”å¦‚åœ¨Manusçš„æç¤ºè¯ä¸­ä¿®æ”¹å¼ºè°ƒè¯†åˆ«ä»»åŠ¡æ˜¯å¦å®Œæˆï¼Œå¦‚æœå·²ç»å®Œæˆäº†å¯ä»¥ä½¿ç”¨ç»ˆæ­¢å·¥å…·ç»“æŸä»»åŠ¡ã€‚

``` python
SYSTEM_PROMPT = (  
    "You are OpenManus, an all-capable AI assistant, aimed at solving any task presented by the user."  
    "You have various tools at your disposal that you can call upon to efficiently complete complex requests."    "Whether it's programming, information retrieval, file processing, or web browsing, you can handle it all."    "<important> you should always choose a tool, when tool executed fail,you can try it again or select other tool."    "<important> If you stop, use `terminate` tool/function call.<important> "    "for user experience, You should deliver you final work file in the end of of task,whether it's markdown,txt,chart,or any code. you can decide, but if it's text output,it's best to write a markdown file."    "The initial directory is: {directory}")  
  
NEXT_STEP_PROMPT = """  
Based on user needs, proactively select the most suitable tool or combination of tools. For complex tasks,  
you can break down the problem and use different tools step by step to solve it. After using each tool, compactly explain the execution results and suggest the next steps.  
<important> Once you notice your job is done,you should call `terminate` tool to end your mission.<important> `  
"""
```




